<h2 mat-dialog-title>{{ isEditMode ? 'Edit Menu Item' : 'Add New Menu Item' }}</h2>

<mat-dialog-content>
  <form [formGroup]="form" class="dialog-form">
    
    <!-- Image Preview -->
    <div class="image-preview" *ngIf="form.get('imageUrl')?.value">
      <img [src]="form.get('imageUrl')?.value" 
           alt="Preview">
    </div>

    <!-- Name Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Name</mat-label>
      <input matInput 
             formControlName="name" 
             placeholder="Enter item name"
             maxlength="100">
      <mat-hint>{{ form.get('name')?.value?.length || 0 }}/100</mat-hint>
      <mat-error *ngIf="form.get('name')?.invalid">
        {{ getErrorMessage('name') }}
      </mat-error>
    </mat-form-field>

    <!-- Description Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Description</mat-label>
      <textarea matInput 
                formControlName="description" 
                placeholder="Enter description"
                rows="3"
                maxlength="500"></textarea>
      <mat-hint>{{ form.get('description')?.value?.length || 0 }}/500</mat-hint>
      <mat-error *ngIf="form.get('description')?.invalid">
        {{ getErrorMessage('description') }}
      </mat-error>
    </mat-form-field>

    <!-- Price Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Price</mat-label>
      <input matInput 
             type="number" 
             formControlName="price" 
             placeholder="Enter price"
             min="0"
             step="0.01">
      <span matPrefix>â‚¹&nbsp;</span>
      <mat-error *ngIf="form.get('price')?.invalid">
        {{ getErrorMessage('price') }}
      </mat-error>
    </mat-form-field>

    <!-- Category/Classification Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Category</mat-label>
      <mat-select formControlName="classification" placeholder="Select category">
        <mat-option value="veg">Veg</mat-option>
        <mat-option value="non-veg">Non Veg</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('classification')?.invalid">
        {{ getErrorMessage('classification') }}
      </mat-error>
    </mat-form-field>

    <!-- Image URL Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Image URL</mat-label>
      <input matInput 
             formControlName="imageUrl" 
             placeholder="https://example.com/image.jpg">
      <mat-error *ngIf="form.get('imageUrl')?.invalid">
        {{ getErrorMessage('imageUrl') }}
      </mat-error>
    </mat-form-field>

    <!-- Availability Toggle -->
    <div class="availability-toggle">
      <mat-slide-toggle formControlName="itemAvailable" color="primary">
        Item Available
      </mat-slide-toggle>
    </div>

  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-raised-button 
          color="primary" 
          (click)="onSave()"
          [disabled]="form.invalid">
    {{ isEditMode ? 'Save Changes' : 'Add Item' }}
  </button>
</mat-dialog-actions>
